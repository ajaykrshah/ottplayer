(this["webpackJsonpm3u-player"]=this["webpackJsonpm3u-player"]||[]).push([[0],{14:function(e,t,a){},15:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a.n(c),s=a(8),o=a.n(s),r=(a(14),a(15),a(0));var l=e=>{let{isDarkMode:t,toggleTheme:a}=e;return Object(r.jsxs)("div",{className:"toggle-container ".concat(t?"dark":"light"),children:[Object(r.jsx)("input",{type:"checkbox",className:"toggle-checkbox",id:"toggle",checked:t,onChange:a}),Object(r.jsx)("label",{className:"toggle-label",htmlFor:"toggle",children:Object(r.jsx)("span",{className:"toggle-ball"})}),Object(r.jsx)("p",{children:t?"Dark Mode":"Light Mode"})]})};var i=e=>{const t=e.split("\n"),a=[];let c=null;return t.forEach((e=>{if(e.startsWith("#EXTINF:")){const t=e.match(/#EXTINF:(-?\d+)(?:\s+tvg-chno="([^"]*)")?(?:\s+tvg-name="([^"]*)")?(?:\s+tvg-logo="([^"]*)")?(?:\s+tvg-language="([^"]*)")?(?:\s+tvg-type="([^"]*)")?(?:\s+group-title="([^"]*)")?.*,(.*)/);if(t&&t.length>=9){const[,,e,,a,n,s,o,r]=t,l=a||"",i=n||"",g=s||"",h=o||"";c={tvgChno:parseInt(e),name:r,logo:l,language:i,type:g,group:h,url:""}}}else""===e.trim()||e.startsWith("#")||c&&(c.url=e.trim(),a.push({...c}),c=null)})),a};const g="channels",h="https://jiotv.data.cdn.jio.com/apis/v1.4/getMobileChannelList/get/?os=android&devicetype=phone",d="plaYtv/7.0.8 (Linux;Android 7.1.2) ExoPlayerLib/2.11.7",u=216e5;async function m(){try{const t=JSON.parse(localStorage.getItem(g)||"{}");if((e=t)&&e.genrateDate&&(new Date).getTime()-e.genrateDate<u)return t;const a={method:"GET",headers:{Accept:"*/*","User-Agent":d}},c=await fetch(h,a);if(!c.ok)throw new Error("Failed to fetch: ".concat(c.status," ").concat(c.statusText));const n=await c.json();return n.genrateDate=(new Date).getTime(),localStorage.setItem(g,JSON.stringify(n)),n}catch(t){throw console.error("Error fetching channels:",t.message),new Error("Failed to fetch channels")}var e}const j={8:"Sports",5:"Entertainment",6:"Movies",12:"News",13:"Music",7:"Kids",9:"Lifestyle",10:"Infotainment",15:"Devotional",16:"Business",17:"Educational",18:"Shopping",19:"JioDarshan"},p={6:"English",1:"Hindi",2:"Marathi",3:"Punjabi",4:"Urdu",5:"Bengali",7:"Malayalam",8:"Tamil",9:"Gujarati",10:"Odia",11:"Telugu",12:"Bhojpuri",13:"Kannada",14:"Assamese",15:"Nepali",16:"French"};var b=async e=>{try{const t=await async function(){var e='#EXTM3U  x-tvg-url="https://tobalan.github.io/epg.xml.gz"\n';const t=await m(),a=Object({NODE_ENV:"production",PUBLIC_URL:"/ottplayer",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_BASE_URL||"http://192.168.101.30:3500";for(let c of t.result){const{channel_name:t,channel_id:n,logoUrl:s,channelCategoryId:o,channelLanguageId:r,isCatchupAvailable:l}=c,i="https://jiotv.catchup.cdn.jio.com/dare_images/images/".concat(s),g=j[o],h=p[r];let d='#EXTINF:-1 tvg-chno="'.concat(n,'" tvg-name="').concat(t,'" tvg-logo="').concat(i,'" tvg-language="').concat(h,'" tvg-type="').concat(g,'" group-title="').concat(g,'"');l&&(d+=' catchup="vod" catchup-source="'.concat(a,"/catchup/getm3u8/${start}/${end}/").concat(n,'/index.m3u8" catchup-days="7"')),d+=", ".concat(t," \n").concat(a,"/getm3u8/").concat(n,"/master.m3u8\n"),e+=d}return e}();e(i(t))}catch(t){console.error("Error fetching or parsing playlist:",t)}};var v=e=>{let{streams:t,handleStreamClick:a}=e;return Object(r.jsx)("div",{className:"streams",children:t.map(((e,t)=>Object(r.jsxs)("div",{onClick:()=>a(e.tvgChno),className:"stream-card",children:[Object(r.jsx)("img",{src:e.logo,alt:e.name}),Object(r.jsx)("h3",{children:e.name})]},t)))})};var O=e=>{let{streams:t,setFilteredStreams:a}=e;const[n,s]=Object(c.useState)("");Object(c.useEffect)((()=>{a(t)}),[t,a]);return Object(r.jsx)("div",{className:"filters",children:Object(r.jsx)("input",{type:"text",placeholder:"Search...",value:n,onChange:e=>{const c=e.target.value.toLowerCase();if(s(c),c.trim()){const e=t.filter((e=>{const t=e.name.toLowerCase(),a=e.group.toLowerCase(),n=e.language.toLowerCase();return t.includes(c)||a.includes(c)||n.includes(c)}));a(e)}else a(t)}})})},x=a(9),S=a.n(x);var f=e=>{let{selectedStream:t,handleClosePlayer:a}=e;return Object(r.jsxs)("div",{children:[Object(r.jsx)("button",{className:"close-btn",onClick:a,children:"Close Player"}),Object(r.jsx)(S.a,{url:t.url,controls:!0})]})};var y=()=>{const[e,t]=Object(c.useState)([]),[a,n]=Object(c.useState)(null),[s,o]=Object(c.useState)([]),[i,g]=Object(c.useState)(!1);Object(c.useEffect)((()=>{const e=localStorage.getItem("theme");e&&g("dark"===e),b(t)}),[]);return Object(r.jsx)("div",{className:i?"dark-mode":"light-mode",children:Object(r.jsxs)("div",{className:"app-container",children:[Object(r.jsx)("h1",{children:"React M3U Player"}),Object(r.jsx)(O,{streams:e,setFilteredStreams:o}),Object(r.jsx)(l,{isDarkMode:i,toggleTheme:()=>{const e=!i;g(e),localStorage.setItem("theme",e?"dark":"light")}}),a?Object(r.jsx)(f,{selectedStream:a,handleClosePlayer:()=>{n(null)}}):Object(r.jsx)(v,{streams:s,handleStreamClick:t=>{const a=e.findIndex((e=>e.tvgChno===t));n(e[a])}})]})})};a(39);o.a.render(Object(r.jsx)(n.a.StrictMode,{children:Object(r.jsx)(y,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.d9fd3c53.chunk.js.map