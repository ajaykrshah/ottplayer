(this["webpackJsonpm3u-player"]=this["webpackJsonpm3u-player"]||[]).push([[0],{37:function(e,t,a){},38:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},69:function(e,t,a){},71:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),s=a(13),o=a.n(s),r=(a(37),a(38),a(2));var l=e=>{let{isDarkMode:t,toggleTheme:a}=e;return Object(r.jsx)("div",{className:"toggle-wrapper",children:Object(r.jsxs)("div",{className:"toggle-container ".concat(t?"dark":"light"),children:[Object(r.jsx)("input",{type:"checkbox",className:"toggle-checkbox",id:"toggle",checked:t,onChange:a}),Object(r.jsx)("label",{className:"toggle-label",htmlFor:"toggle",children:Object(r.jsx)("span",{className:"toggle-ball"})}),Object(r.jsx)("p",{children:t?"Dark Mode":"Light Mode"})]})})};var i=e=>{const t=e.split("\n"),a=[];let c=null;return t.forEach((e=>{if(e.startsWith("#EXTINF:")){const t=e.match(/#EXTINF:(-?\d+)(?:\s+tvg-chno="([^"]*)")?(?:\s+tvg-name="([^"]*)")?(?:\s+tvg-logo="([^"]*)")?(?:\s+tvg-language="([^"]*)")?(?:\s+tvg-type="([^"]*)")?(?:\s+group-title="([^"]*)")?.*,(.*)/);if(t&&t.length>=9){const[,,e,,a,n,s,o,r]=t,l=a||"",i=n||"",d=s||"",g=o||"";c={tvgChno:parseInt(e),name:r,logo:l,language:i,type:d,group:g,url:""}}}else""===e.trim()||e.startsWith("#")||c&&(c.url=e.trim(),a.push({...c}),c=null)})),a};const d="channels",g="https://jiotv.data.cdn.jio.com/apis/v1.4/getMobileChannelList/get/?os=android&devicetype=phone",h="plaYtv/7.0.8 (Linux;Android 7.1.2) ExoPlayerLib/2.11.7",u=216e5,m="https://jiotv.catchup.cdn.jio.com/dare_images";async function j(){try{const t=JSON.parse(localStorage.getItem(d)||"{}");if((e=t)&&e.genrateDate&&(new Date).getTime()-e.genrateDate<u)return t;const a={method:"GET",headers:{Accept:"*/*","User-Agent":h}},c=await fetch(g,a);if(!c.ok)throw new Error("Failed to fetch: ".concat(c.status," ").concat(c.statusText));const n=await c.json();return n.genrateDate=(new Date).getTime(),localStorage.setItem(d,JSON.stringify(n)),n}catch(t){throw console.error("Error fetching channels:",t.message),new Error("Failed to fetch channels")}var e}const p={8:"Sports",5:"Entertainment",6:"Movies",12:"News",13:"Music",7:"Kids",9:"Lifestyle",10:"Infotainment",15:"Devotional",16:"Business",17:"Educational",18:"Shopping"},b={6:"English",1:"Hindi",2:"Marathi",3:"Punjabi",4:"Urdu",5:"Bengali",7:"Malayalam",8:"Tamil",9:"Gujarati",10:"Odia",11:"Telugu",12:"Bhojpuri",13:"Kannada",14:"Assamese",15:"Nepali",16:"French"};async function v(e){const t=[],a=[];for(let n=0;n<1;n++){let s=0;for(;s<1;)try{const c=new URLSearchParams({offset:n,channel_id:e.channel_id,langId:"6"}),s=await fetch("".concat("https://jiotv.data.cdn.jio.com/apis","/v1.3/getepg/get?").concat(c)),o=await s.json();0===n&&t.push({"@id":e.channel_id,"display-name":e.channel_name,icon:{"@src":"".concat(m,"/images/").concat(e.logoUrl)}}),o.epg.forEach((e=>{const t=O(e);a.push(t)}));break}catch(c){console.log("Retry failed (Retry Count: ".concat(s+1,"): ").concat(c)),s++,1===s||await new Promise((e=>setTimeout(e,2e3)))}}return{channelData:t,programmes:a}}const O=e=>{const t={timeZone:"Asia/Kolkata"},a={"@start":new Date(e.startEpoch).toLocaleString("en-IN",t),"@stop":new Date(e.endEpoch).toLocaleString("en-IN",t),"@channel":e.channel_id,"@catchup-id":e.srno,title:e.showname,desc:e.description,category:e.showCategory,icon:{"@src":"".concat(m,"/shows/").concat(e.episodePoster)}};return e.episode_num>-1&&(a["episode-num"]={"@system":"xmltv_ns","#text":"0.".concat(e.episode_num)}),(e.director||e.starCast)&&(a.credits={director:e.director,actor:e.starCast&&e.starCast.split(", ")}),e.episode_desc&&(a["sub-title"]=e.episode_desc),a};var x=async e=>{try{const t=await async function(){var e='#EXTM3U  x-tvg-url="https://tobalan.github.io/epg.xml.gz"\n';const t=await j(),a=Object({NODE_ENV:"production",PUBLIC_URL:"/ottplayer",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_BASE_URL||"http://192.168.101.30:3500";for(let c of t.result){const{channel_name:t,channel_id:n,logoUrl:s,channelCategoryId:o,channelLanguageId:r,isCatchupAvailable:l}=c,i="https://jiotv.catchup.cdn.jio.com/dare_images/images/".concat(s),d=p[o],g=b[r];if([1,6,12].includes(r)){let c='#EXTINF:-1 tvg-chno="'.concat(n,'" tvg-name="').concat(t,'" tvg-logo="').concat(i,'" tvg-language="').concat(g,'" tvg-type="').concat(d,'" group-title="').concat(d,'"');l&&(c+=' catchup="vod" catchup-source="'.concat(a,"/catchup/getm3u8/${start}/${end}/").concat(n,'/index.m3u8" catchup-days="7"')),c+=", ".concat(t," \n").concat(a,"/getm3u8/").concat(n,"/master.m3u8\n"),e+=c}}return e}();e(i(t))}catch(t){console.error("Error fetching or parsing playlist:",t)}};var f=e=>{let{streams:t,handleStreamClick:a}=e;return Object(r.jsx)("div",{className:"streams",children:t.map(((e,t)=>Object(r.jsxs)("div",{onClick:()=>a(e.tvgChno),className:"stream-card",children:[Object(r.jsx)("img",{src:e.logo,alt:e.name}),Object(r.jsx)("h3",{children:e.name})]},t)))})};a(40);var S=e=>{let{streams:t,setFilteredStreams:a}=e;const[n,s]=Object(c.useState)(""),[o,l]=Object(c.useState)(""),[i,d]=Object(c.useState)("");Object(c.useEffect)((()=>{a(t)}),[t,a]);const g=(e,c,n)=>{let s=t;e.trim()&&(s=s.filter((t=>{const a=t.name.toLowerCase(),c=t.group.toLowerCase(),n=t.language.toLowerCase();return a.includes(e)||c.includes(e)||n.includes(e)}))),""!==c&&(s=s.filter((e=>e.language===c))),""!==n&&(s=s.filter((e=>e.group===n))),a(s)},h={1:b[1],6:b[6],12:b[12]};return Object(r.jsxs)("div",{className:"filters",children:[Object(r.jsx)("input",{type:"text",placeholder:"Search...",value:n,onChange:e=>{const t=e.target.value.toLowerCase();s(t),g(t,o,i)}}),Object(r.jsxs)("select",{value:o,onChange:e=>{const t=e.target.value;l(t),g(n,t,i)},children:[Object(r.jsx)("option",{value:"",children:"Select Language"}),Object.entries(h).map((e=>{let[t,a]=e;return Object(r.jsx)("option",{value:a,children:a},t)}))]}),Object(r.jsxs)("select",{value:i,onChange:e=>{const t=e.target.value;d(t),g(n,o,t)},children:[Object(r.jsx)("option",{value:"",children:"Select Genre"}),Object.entries(p).map((e=>{let[t,a]=e;return Object(r.jsx)("option",{value:a,children:a},t)}))]})]})},y=a(23),w=a.n(y),E=(a(41),a(86)),N=a(30),C=a.n(N);var _=e=>{var t;let{selectedStream:a,goBack:n}=e;const[s,o]=Object(c.useState)([]),l=Object(c.useRef)(null);Object(c.useEffect)((()=>{(async()=>{try{const e={channel_id:a.tvgChno,channel_name:a.name.trim(),logoUrl:a.logo},t=await v(e);o(t)}catch(e){console.error("Error fetching EPG data:",e)}})()}),[]);const i=e=>{if(l.current&&null!==s&&void 0!==s&&s.programmes&&s.programmes[e]){const t=l.current.querySelectorAll(".program-item")[e];t&&t.scrollIntoView({behavior:"smooth",block:"start"})}};return Object(c.useEffect)((()=>{(()=>{if(l.current&&null!==s&&void 0!==s&&s.programmes){const e=(new Date).toLocaleString("en-IN",{timeZone:"Asia/Kolkata"}),t=s.programmes.findIndex((t=>t["@start"]<=e&&t["@stop"]>=e));-1!==t&&i(t)}})()}),[s]),Object(r.jsxs)("div",{id:"Player",children:[Object(r.jsxs)(E.a,{className:"back-btn",onClick:n,children:[Object(r.jsx)(C.a,{})," Back"]}),Object(r.jsxs)("div",{className:"container",children:[Object(r.jsx)("div",{className:"player-wrapper",children:Object(r.jsx)(w.a,{className:"react-player",width:"100%",height:"100%",url:a.url,controls:!0,playing:!0})}),Object(r.jsx)("div",{className:"program-list",ref:l,children:Object(r.jsx)("ul",{className:"scrollable-list",children:null===s||void 0===s||null===(t=s.programmes)||void 0===t?void 0:t.map(((e,t)=>Object(r.jsx)("li",{className:"program-item",children:Object(r.jsxs)("div",{className:"program-details",children:[Object(r.jsx)("img",{src:e.icon["@src"],alt:e.title,className:"program-icon"}),Object(r.jsxs)("div",{className:"program-info",children:[Object(r.jsx)("h3",{children:e.title}),Object(r.jsx)("p",{children:e.desc}),Object(r.jsxs)("p",{children:["Start Date: ",e["@start"]]}),Object(r.jsxs)("p",{children:["Stop Date: ",e["@stop"]]}),Object(r.jsxs)("p",{children:["Category: ",e.category]})]})]})},t)))})})]})]})};var k=()=>{const[e,t]=Object(c.useState)([]),[a,n]=Object(c.useState)(null),[s,o]=Object(c.useState)([]),[i,d]=Object(c.useState)(!1);Object(c.useEffect)((()=>{const e=localStorage.getItem("theme");e&&d("dark"===e),x(t)}),[]);return Object(r.jsx)("div",{className:i?"dark-mode":"light-mode",children:Object(r.jsxs)("div",{className:"app-container",children:[Object(r.jsx)("h1",{children:"React M3U Player"}),Object(r.jsx)(S,{streams:e,setFilteredStreams:o}),Object(r.jsx)(l,{isDarkMode:i,toggleTheme:()=>{const e=!i;d(e),localStorage.setItem("theme",e?"dark":"light")}}),a?Object(r.jsx)(_,{selectedStream:a,goBack:()=>n(null)}):Object(r.jsx)(f,{streams:s,handleStreamClick:t=>{const a=e.findIndex((e=>e.tvgChno===t));n(e[a])}})]})})};a(69);o.a.render(Object(r.jsx)(n.a.StrictMode,{children:Object(r.jsx)(k,{})}),document.getElementById("root"))}},[[71,1,2]]]);
//# sourceMappingURL=main.ffd22ee3.chunk.js.map